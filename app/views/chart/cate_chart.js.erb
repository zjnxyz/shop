var data1 = [];
var data2 = [];

<% if @p_id==0 %>

  <% @data1.each do |d|%>
    data1.push(['<%= Product.find(d[0]).name%>', <%= d[1]%>]);
  <% end %>
  <% @data2.each do |d|%>
    data2.push(['<%= Product.find(d[0]).name%>', <%= d[1]%>]);
  <% end %>

  var name='<%= @category.name %>'

$('#jqChart').jqChart({
                title: { text: name+'销售统计图表' },
                axes: [
                         {
                             name: 'y1',
                             location: 'left'
                         },
                         {
                             name: 'y2',
                             location: 'right',
                             strokeStyle: '#FCB441',
                             majorGridLines: { strokeStyle: '#FCB441' },
                             majorTickMarks: { strokeStyle: '#FCB441' }
                         }
                      ],
                series: [
                            {
                            	title: '销售量',
                                type: 'column',
                                axisY: 'y1',
                                data: data1 
                            },
                            {
                            	title: '销售额',
                                type: 'line',
                                axisY: 'y2',
                                data: data2
                            }
                        ]
            });

<% else %>

   <% @data1.each do |d|%>
     data1.push(['<%= d[0]%>', <%= d[1]%>]);
   <% end %>

   <% @data2.each do |d|%>
     data2.push(['<%= d[0]%>', <%= d[1]%>]);
   <% end %>
    var name='<%= @product.name %>'

   $('#jqChart').jqChart({
                title: { text: name+'的销售统计图表' },
                axes: [
                         {
                             name: 'y1',
                             location: 'left'
                         },
                         {
                             name: 'y2',
                             location: 'right',
                             strokeStyle: '#FCB441',
                             majorGridLines: { strokeStyle: '#FCB441' },
                             majorTickMarks: { strokeStyle: '#FCB441' }
                         }
                      ],
                series: [
                            {
                                title: '销售量',
                                type: 'column',
                                axisY: 'y1',
                                data: data1 
                            },
                            {
                                title: '销售额',
                                type: 'line',
                                axisY: 'y2',
                                data: data2
                            }
                        ]
            });

<% end %>